!function(a){"use strict";a.MaskedInput=function(b){if(!b||!b.elm||!b.format)return null;if(!(this instanceof a.MaskedInput))return new a.MaskedInput(b);var c=this,d=b.elm,e=b.format,f=b.allowed||"0123456789",g=b.allowedfx||function(){return!0},h=b.separator||"/:-",i=b.typeon||"_YMDhms",j=b.onbadkey||function(){},k=b.onfilled||function(){},l=b.badkeywait||0,m=!b.hasOwnProperty("preserve")||!!b.preserve,n=!0,o=!1,p=e,q=function(){return window.addEventListener?function(a,b,c,d){a.addEventListener(b,c,void 0!==d&&d)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a["on"+b]=c}}(),r=function(){for(var a=d.value.length-1;a>=0;a--)for(var b=0,c=i.length;b<c;b++)if(d.value[a]===i[b])return!1;return!0},s=function(a){try{if(a.focus(),a.selectionStart>=0)return a.selectionStart;if(document.selection){return-document.selection.createRange().moveStart("character",-a.value.length)}return-1}catch(a){return-1}},t=function(a,b){try{if(a.selectionStart)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.move("character",b),c.select()}}catch(a){return!1}return!0},u=function(a){a=a||window.event;var b="",c=a.which,d=a.type;if(void 0!==c&&null!==c||(c=a.keyCode),void 0===c||null===c)return"";switch(c){case 8:b="bksp";break;case 46:b="keydown"===d?"del":".";break;case 16:b="shift";break;case 0:case 9:case 13:b="etc";break;case 37:case 38:case 39:case 40:b=a.shiftKey||39===a.charCode||void 0===a.charCode?String.fromCharCode(c):"etc";break;default:b=String.fromCharCode(c)}return b},v=function(a,b){a.preventDefault&&a.preventDefault(),a.returnValue=b||!1},w=function(a){var b=s(d),k=d.value,l="";switch(!0){case-1!==f.indexOf(a):if((b+=1)>e.length)return!1;for(;-1!==h.indexOf(k.charAt(b-1))&&b<=e.length;)b+=1;if(!g(c,a,b))return j(a),!1;l=k.substr(0,b-1)+a+k.substr(b),-1===f.indexOf(k.charAt(b))&&-1===i.indexOf(k.charAt(b))&&(b+=1);break;case"bksp"===a:if((b-=1)<0)return!1;for(;-1===f.indexOf(k.charAt(b))&&-1===i.indexOf(k.charAt(b))&&b>1;)b-=1;l=k.substr(0,b)+e.substr(b,1)+k.substr(b+1);break;case"del"===a:if(b>=k.length)return!1;for(;-1!==h.indexOf(k.charAt(b))&&""!==k.charAt(b);)b+=1;l=k.substr(0,b)+e.substr(b,1)+k.substr(b+1),b+=1;break;case"etc"===a:return!0;default:return!1}return d.value="",d.value=l,t(d,b),!1},x=function(a){if(-1===f.indexOf(a)&&"bksp"!==a&&"del"!==a&&"etc"!==a){var b=s(d);return o=!0,j(a),setTimeout(function(){o=!1,t(d,b)},l),!1}return!0},y=function(a){if(!n)return!0;if(a=a||event,o)return v(a),!1;var b=u(a);return!a.metaKey&&!a.ctrlKey||"X"!==b&&"V"!==b?!(!a.metaKey&&!a.ctrlKey)||(""===d.value&&(d.value=e,t(d,0)),"bksp"!==b&&"del"!==b||(w(b),v(a),!1)):(v(a),!1)},z=function(a){if(!n)return!0;if(a=a||event,o)return v(a),!1;var b=u(a);return!!("etc"===b||a.metaKey||a.ctrlKey||a.altKey)||"bksp"!==b&&"del"!==b&&"shift"!==b&&(x(b)?w(b)?(r()&&k(c,s(d)),v(a,!0),!0):(r()&&k(c,s(d)),v(a),!1):(v(a),!1))};return c.resetField=function(){d.value=e},c.setAllowed=function(a){f=a,c.resetField()},c.setCursorPos=function(a){t(d,a)},c.setFormat=function(a){e=a,c.resetField()},c.setSeparator=function(a){h=a,c.resetField()},c.setTypeon=function(a){i=a,c.resetField()},c.setEnabled=function(a){n=a},function(){return!d.tagName||"INPUT"!==d.tagName.toUpperCase()&&"TEXTAREA"!==d.tagName.toUpperCase()?null:(c.elm=d,m&&""!==d.value||(d.value=e),q(d,"keydown",function(a){y(a)}),q(d,"keypress",function(a){z(a)}),q(d,"focus",function(){p=d.value}),q(d,"blur",function(){d.value!==p&&d.onchange&&d.onchange()}),c)}()}}(window);